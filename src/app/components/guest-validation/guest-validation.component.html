<div class="validation-container">
    <div class="validation-card shadow-lg">
        <!-- Header -->
        <div class="header">
            <h2 class="title">Boda Daniela & John</h2>
            <div class="date-badge">15.08.2026</div>
        </div>

        <!-- Content -->
        <div class="content">
            <!-- Loading -->
            <div *ngIf="isLoading" class="loader text-center">
                <div class="spinner-border text-gold" role="status"></div>
                <p class="mt-2">Verificando...</p>
            </div>

            <!-- Manual/Camera Selection Mode -->
            <div *ngIf="isManualMode && !isLoading && !isScanning" class="action-selection text-center fade-in">
                <div class="status-icon" [style.color]="statusColor">
                    <i class="material-icons">{{ statusIcon }}</i>
                </div>
                <h3 class="status-title" [style.color]="statusColor === '#f44336' ? '#f44336' : '#5D4037'">
                    {{ statusMessage }}
                </h3>

                <!-- Mostrar ayuda si hay error de c√°mara -->
                <div *ngIf="statusColor === '#f44336'" class="alert-camera-error mt-2">
                    <small>üí° Tip: Verifica los permisos de c√°mara en tu navegador</small>
                </div>

                <div class="row g-2 mt-3">
                    <div class="col-12">
                        <button class="btn btn-primary-gold w-100" (click)="startScanner()">
                            <i class="material-icons">photo_camera</i> ESCANEAR QR
                        </button>
                    </div>
                </div>

                <div class="divider"><span>O INGRESA ID</span></div>

                <div class="form-group">
                    <input type="text" class="form-control-minimal" [(ngModel)]="enteredId"
                        placeholder="ID del invitado" (keyup.enter)="onManualSubmit()">
                    <button class="btn btn-outline-gold w-100 mt-2" (click)="onManualSubmit()">
                        VERIFICAR POR ID
                    </button>
                </div>
            </div>

            <!-- Camera Scanner Mode -->
            <div *ngIf="isScanning" class="scanner-wrapper fade-in">
                <div id="reader"></div>
                <button class="btn btn-outline-danger w-100 mt-3" (click)="stopScanner()">
                    CANCELAR C√ÅMARA
                </button>
            </div>

            <!-- Result Mode -->
            <div *ngIf="!isLoading && !isManualMode && !isScanning" class="result-view text-center fade-in">
                <!-- Status Icon -->
                <div class="status-icon-small" [style.color]="statusColor">
                    <i class="material-icons">{{ statusIcon }}</i>
                </div>

                <h3 class="result-status" [style.color]="statusColor">
                    {{ isValid ? '¬°BIENVENIDO!' : statusMessage }}
                </h3>

                <!-- Guest Info Interface -->
                <div *ngIf="guest" class="guest-details-box mt-3">
                    <div class="detail-item">
                        <span class="detail-label">INVITADO</span>
                        <div class="detail-value">{{ guest.name }}</div>
                    </div>

                    <div *ngIf="familyName" class="detail-item">
                        <div class="detail-value gold-italic">{{ familyName }}</div>
                    </div>

                    <div *ngIf="isValid" class="access-tag mt-2">
                        <i class="material-icons">done</i> ASISTENCIA CONFIRMADA
                    </div>
                    <div class="guest-id-small mt-2">ID: {{ guest.id }}</div>
                </div>

                <button class="btn btn-refresh mt-4" (click)="resetValidation()">
                    <i class="material-icons">autorenew</i> OTRO INVITADO
                </button>
            </div>
        </div>

        <div class="footer-simple mt-3 text-center">
            <small>Sistema de Control de Acceso</small>
        </div>
    </div>
</div>